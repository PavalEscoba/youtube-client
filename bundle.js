!function(e){var t={};function n(o){if(t[o])return t[o].exports;var a=t[o]={i:o,l:!1,exports:{}};return e[o].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(o,a,function(t){return e[t]}.bind(null,a));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="build/",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);var o=function e(t,n,o,a,r,s){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.arrayOfScreens=t||[],this.inputValue=n||"",this.current=o||0,this.counter=a||0,this.nextPageToken=r||"",this.previousPageToken=s||""},a=function(e,t){var n=document.createElement(e);return n.classList.add(t),n},r=function(e){return e.map(function(e){return e.id.videoId}).join(",")},s=function(e,t,n,o){document.querySelector(".slider");0===t.items.length&&(n.textContent="nothing found");var r=t.items,s=e.counter,i=document.createDocumentFragment(),c=!0;r.forEach(function(t,r){var l=a("article","video-item");if(l.innerHTML='<a class="video-item__preview-pic-link" href="https://www.youtube.com/watch?v='.concat(t.id,'"target="_blank"><img class="video-item__preview-pic" src="').concat(t.snippet.thumbnails.medium.url,'" alt=""></a> \n    <div class="video-item__info">\n      <div class="video-item__title">\n        <a href="https://www.youtube.com/watch?v=').concat(t.id,'" class="video-item__title-link">\n          <span class="video-item__title-value">').concat(t.snippet.localized.title,'</span></a>\n      </div>\n      <div class="video-item__author">\n        <span class="video-item__author-text">\n          Author:\n        </span>\n        <span class="video-item__author-value">\n          ').concat(t.snippet.channelTitle,'\n        </span>\n      </div>\n      <div class="video-item__pub-date">\n        <span class="video-item__pub-date-text">Publication date:</span>\n        <span class="video-item__pub-date-value">').concat(t.snippet.publishedAt.slice(0,10).split("-").reverse().join("."),'</span>\n      </div>\n      <div class="video-item__view-rate">\n        <span class="video-item__view-rate-text">Views:</span>\n        <span class="video-item__view-rate-value">').concat(t.statistics.viewCount,'</span>\n      </div>\n      <div class="video-item__description">\n        <span class="video-item__description-text">Description:</span>\n        <span class="video-item__description-value">').concat(t.snippet.localized.description,"\n        </span>\n      </div>\n    </div>"),i.appendChild(l),(r+1)%o==0){var d=a("div","slider__slide");c&&!n.hasChildNodes()&&(d.classList.add("slider__slide--active"),c=!1),d.dataset.screenNumber=s,d.appendChild(i),e.arrayOfScreens.push(s),n.appendChild(d),s+=1,e.counter=s}});var l=document.querySelector(".controls");if(!l){var d=a("ul","controls");e.arrayOfScreens.forEach(function(t,n){var o=a("li","controls__item"),r=a("div","controls__tooltip");r.textContent=n+1;var s=a("button","controls__dot");s.dataset.number=n,s.textContent=n+1,0===n&&s.classList.add("controls__dot--active"),n===e.arrayOfScreens.length-1&&(s.dataset.fetchMore=!0),o.append(r,s),d.append(o)}),n.parentElement.appendChild(d)}if(l){var u=l.childElementCount+1;console.log(e.arrayOfScreens.length);for(var p=u;p<=e.arrayOfScreens.length;p+=1){var v=a("li","controls__item"),f=a("div","controls__tooltip");f.textContent=p;var _=a("button","controls__dot");_.textContent=p,p===e.arrayOfScreens.length&&(_.dataset.fetchMore=!0),v.append(f,_),l.append(v)}}},i="AIzaSyClwIUXSO2g8Gj5Yr6r8o-sCOIf-R4LNHk",c=function(e){if(e.ok)return e;var t=new Error(e.statusText);return t.response=e,Promise.reject(t)},l=function(e){var t=document.querySelector(".controls"),n=t.querySelector(".controls__dot--active"),o=+n.dataset.number,a=t.querySelector('[data-number="'.concat(o-1,'"]'));console.log(a);var r=t.querySelector('[data-number="'.concat(o+1,'"]'));if("right"===e&&a){n.classList.remove("controls__dot--active"),a.classList.add("controls__dot--active");var s=a.dataset.number,i=document.querySelector(".slider__slide--active"),c=document.querySelector('[data-screen-number="'.concat(s,'"]'));i.classList.remove("slider__slide--active"),c.classList.add("slider__slide--active")}if("left"===e){n.classList.remove("controls__dot--active"),r.classList.add("controls__dot--active");var l=r.dataset.number,d=document.querySelector(".slider__slide--active"),u=document.querySelector('[data-screen-number="'.concat(l,'"]'));d.classList.remove("slider__slide--active"),u.classList.add("slider__slide--active")}},d=function(e){var t=e.target;document.querySelector(".controls")&&("controls__dot"!==t.className&&"controls__dot controls__dot--active"!==t.className||t.previousElementSibling.classList.toggle("controls__tooltip--active"))};n(1);!function(){var e=document.body,t=a("div","container"),n=a("header","header"),o=a("h1","header__heading");o.textContent="App for Youtube search and statisctics",n.appendChild(o);var r=a("main","main-content"),s=a("h2","main-content__heading"),i=a("section","slider"),c=a("div","slider__inner");i.appendChild(c),r.appendChild(s),r.insertAdjacentHTML("beforeEnd",'<form class="search-form" action=""> <label class="search-form__label-input" for="youtube-search">Type your request <input class="search-form__input" type="search" name="search-field" id="js-youtube-search-field"></label> <button class="search-form__btn" id="js-search-btn"> Search </button></form>'),r.appendChild(i);var l=a("footer","footer"),d=a("h2","footer__heading");d.textContent="Made by Paval Miatlitski",l.appendChild(d),t.append(n,r),e.append(t,l)}();var u=new o,p=document.body,v=document.getElementById("js-search-btn"),f=document.getElementById("js-youtube-search-field"),_=document.querySelector(".slider__inner");v.addEventListener("dblclick",function(e){return e.preventDefault(),!1}),v.addEventListener("click",function(e){(e.preventDefault(),u=new o,_.firstElementChild)&&(_.innerHTML="",document.querySelector(".controls").remove());var t=f.value;f.value="";var n="".concat("https://www.googleapis.com/youtube/v3/search?","key=").concat(i,"&type=video&part=snippet&maxResults=15&q=").concat(t);fetch(n).then(c).then(function(e){return e.json()}).then(function(e){u.nextPageToken=e.nextPageToken;var t=r(e.items),n="https://www.googleapis.com/youtube/v3/videos?key=".concat(i,"&id=").concat(t,"&part=snippet,statistics");return fetch(n)}).then(function(e){return e.json()}).then(function(e){s(u,e,_,3)}).catch(function(e){return console.log("there was an error: ".concat(e))})}),p.addEventListener("mousedown",d),p.addEventListener("mouseup",d),p.addEventListener("click",function(e){if("click"===e.type){var t=e.target,n=document.querySelector(".controls");if(n){if("controls__dot"===t.className){n.querySelector(".controls__dot--active").classList.remove("controls__dot--active"),t.classList.add("controls__dot--active");var o=t.textContent,a=document.querySelector(".slider__slide--active"),l=document.querySelector('[data-screen-number="'.concat(o-1,'"]'));a.classList.remove("slider__slide--active"),l.classList.add("slider__slide--active")}if(t.dataset.fetchMore){delete t.dataset.fetchMore;var d="".concat("https://www.googleapis.com/youtube/v3/search?","key=").concat(i,"&pageToken=").concat(u.nextPageToken,"&type=video&part=snippet&maxResults=15&q=").concat(u.inputValue);fetch(d).then(c).then(function(e){return e.json()}).then(function(e){u.nextPageToken=e.nextPageToken;var t=r(e.items),n="https://www.googleapis.com/youtube/v3/videos?key=".concat(i,"&id=").concat(t,"&part=snippet,statistics");return fetch(n)}).then(function(e){return e.json()}).then(function(e){s(u,e,_,3)}).catch(function(e){return console.log("there was an error: ".concat(e))})}}}}),document.addEventListener("mousedown",function(e){var t=e.target;if("slider__slide slider__slide--active"===t.className){var n=e.pageX,o=null;document.onmousemove=function(e){o=n-e.pageX,t.style.transform="translateX(".concat(-o,"px)")},document.onmouseup=function(){if(Math.abs(o)>100){if(o<0&&(console.log("swiped right"),console.log(e.target),t.style.transition="all 3s",t.style.opacity="0",t.style.transform="translateX(200%)",l("right"),t.setAttribute("style","")),o>0&&(console.log(e.target),t.style.transition="all 3s",t.style.opacity="0",t.style.transform="translateX(-200%)",l("left"),t.setAttribute("style",""),t.dataset.fetchMore)){delete t.dataset.fetchMore;var n="".concat(requestURL,"key=").concat(key,"&pageToken=").concat(state.nextPageToken,"&type=video&part=snippet&maxResults=15&q=").concat(state.inputValue);fetch(n).then(checkStatus).then(function(e){return e.json()}).then(function(e){state.nextPageToken=e.nextPageToken;var t=getIds(e.items),n="https://www.googleapis.com/youtube/v3/videos?key=".concat(key,"&id=").concat(t,"&part=snippet,statistics");return fetch(n)}).then(function(e){return e.json()}).then(function(e){generateSlider(state,e,sliderInner,3)}).catch(function(e){return console.log("there was an error: ".concat(e))})}}else t.style.transform="initial";document.onmousemove=null,t.onmouseup=null}}})},function(e,t){}]);